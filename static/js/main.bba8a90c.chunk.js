(this.webpackJsonpwebcarnivores=this.webpackJsonpwebcarnivores||[]).push([[0],{105:function(t,i){},106:function(t,i){},109:function(t,i){},111:function(t,i){},131:function(t,i,e){var s,r,a=void 0;s=this,r=function(t,i,e){return function(){function s(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}s.prototype._read=function(){this.vertCount=this._io.readU4le(),this.faceCount=this._io.readU4le(),this.nodeCount=this._io.readU4le(),this.textureSize=this._io.readU4le(),this.faces=new Array(this.faceCount);for(var t=0;t<this.faceCount;t++)this.faces[t]=new e(this._io,this,null);for(this.vertices=new Array(this.vertCount),t=0;t<this.vertCount;t++)this.vertices[t]=new i(this._io,this,null);for(this.nodes=new Array(this.nodeCount),t=0;t<this.nodeCount;t++)this.nodes[t]=new r(this._io,this,this._root);for(this.textureData=new Array(Math.floor(this.textureSize/2)),t=0;t<Math.floor(this.textureSize/2);t++)this.textureData[t]=this._io.readU2le()};var r=s.Node=function(){function i(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return i.prototype._read=function(){this.name=t.bytesToStr(t.bytesTerminate(this._io.readBytes(32),0,!1),"utf8"),this.x=this._io.readF4le(),this.y=this._io.readF4le(),this.z=this._io.readF4le(),this.owner=this._io.readS2le(),this.hide=this._io.readU2le()},i}();return Object.defineProperty(s.prototype,"textureWidth",{get:function(){return void 0!==this._m_textureWidth||(this._m_textureWidth=256),this._m_textureWidth}}),Object.defineProperty(s.prototype,"textureHeight",{get:function(){return void 0!==this._m_textureHeight||(this._m_textureHeight=Math.floor(Math.floor(this.textureSize/2)/this.textureWidth)),this._m_textureHeight}}),s}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream","./Vertex","./Face"],r):t.exports?t.exports=r(e(20),e(132),e(133)):s.C3df=r(s.KaitaiStream,s.Vertex,s.Face)},132:function(t,i,e){var s,r,a=void 0;s=this,r=function(t){return function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.x=this._io.readF4le(),this.y=this._io.readF4le(),this.z=this._io.readF4le(),this.owner=this._io.readS2le(),this.hide=this._io.readU2le()},t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream"],r):t.exports?t.exports=r(e(20)):s.Vertex=r(s.KaitaiStream)},133:function(t,i,e){var s,r,a=void 0;s=this,r=function(t){return function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.v1=this._io.readU4le(),this.v2=this._io.readU4le(),this.v3=this._io.readU4le(),this.tax=this._io.readS4le(),this.tbx=this._io.readS4le(),this.tcx=this._io.readS4le(),this.tay=this._io.readS4le(),this.tby=this._io.readS4le(),this.tcy=this._io.readS4le(),this.fDoubleSide=0!=this._io.readBitsIntBe(1),this.fDarkBack=0!=this._io.readBitsIntBe(1),this.fOpacity=0!=this._io.readBitsIntBe(1),this.fMortal=0!=this._io.readBitsIntBe(1),this.fPhong=0!=this._io.readBitsIntBe(1),this.fEnvmap=0!=this._io.readBitsIntBe(1),this.fNeedvc=0!=this._io.readBitsIntBe(1),this.fUnused=this._io.readBitsIntBe(7),this.fDarkFront=0!=this._io.readBitsIntBe(1),this._io.alignToByte(),this.dMask=this._io.readU2le(),this.distant=this._io.readS4le(),this.next=this._io.readU4le(),this.group=this._io.readU4le(),this.reserved=this._io.readBytes(12)},t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream"],r):t.exports?t.exports=r(e(20)):s.Face=r(s.KaitaiStream)},134:function(t,i,e){},142:function(t,i,e){"use strict";e.r(i);var s=e(4),r=e.n(s),a=e(34),n=e.n(a),o=(e(84),e(79)),h=e(13),u=e(12),c=e(147),d=e(146),f=e(145),p=e(15),l=e(22),_=e.n(l),m=e(45),v=e(20),S=e.n(v),x=e(5),y=e(72),g=e.n(y),b=e(73),w=e.n(b),z="HUNTDAT/AREAS",j=256,M=32,U=128;function B(t){for(var i=new Uint16Array(t.textureCount*U*U),e=0,s=0;s<t.textureCount;s++)for(var r=0;r<16384;r++){var a=t.textures[s].data[r],n=a>>10&31,o=(a>>5&31)<<1,h=a>>0&31;i[e++]=(n<<11)+(o<<5)+h}var u=new x.DataTexture2DArray(i,U,U,t.textureCount);return u.type=x.UnsignedShort565Type,u.format=x.RGBFormat,u.wrapT=u.wrapS=x.RepeatWrapping,u}function C(t,i,e){var s=[],r=i.mapSize,a=r/2;function n(t,e){return i.heightMap[e*i.mapSize+t]*M}for(var o=new x.Matrix4,h=0;h<r;h++)for(var u=0;u<r;u++){var c=i.objectMap[h*r+u];if(c<254)o.makeTranslation((u-a)*j,n(u,h),(h-a)*j),s[c]?s[c].push.apply(s[c],o.toArray()):s[c]=o.toArray();else if(254===c){var d=new x.Mesh(new x.SphereBufferGeometry(128),new x.MeshBasicMaterial({color:16711680}));d.position.set((u-a)*j,n(u,h),(h-a)*j),e.add(d)}}t.models.forEach((function(t,i){if(s[i]){for(var r=s[i].length/16,a=function(t,i){var e,s=new x.BufferGeometry,r=[],a=[],n=[];function o(t,i,e){return a[2*t+0]=i,a[2*t+1]=e,t}return t.forEach((function(t){r.push(t.x,t.y,t.z)})),i.forEach((function(t){var i=t.v1,s=t.v2,r=t.v3;e=o(i,t.tax/256,t.tay/256),n.push(e),e=o(s,t.tbx/256,t.tby/256),n.push(e),e=o(r,t.tcx/256,t.tcy/256),n.push(e)})),s.setAttribute("position",new x.Float32BufferAttribute(r,3)),s.setAttribute("uv",new x.Float32BufferAttribute(a,2)),s.setIndex(n),s.computeVertexNormals(),s}(t.model.vertices,t.model.faces),n=function(t,i){for(var e=256,s=i/512,r=new Uint16Array(e*s),a=0,n=0;n<s;n++)for(var o=0;o<e;o++){var h=t[n*e+o],u=h>>10&31,c=h>>5&31,d=h>>0&31,f=128&h?1:0;r[a++]=(u<<11)+(c<<6)+(d<<1)|f}var p=new x.DataTexture(r,e,s,x.RGBAFormat,x.UnsignedShort5551Type);return p.needsUpdate=!0,p}(t.model.textureData,t.model.textureSize),h=new x.InstancedMesh(a,new x.MeshLambertMaterial({map:n,transparent:!0,alphaTest:.5}),r),u=0;u<r;u++)o.fromArray(s[i],16*u),h.setMatrixAt(u,o);e.add(h)}}))}function A(t){for(var i=new Uint8Array(t.mapSize*t.mapSize*2),e=0;e<t.mapSize*t.mapSize;e++)i[2*e+0]=t.heightMap[e],i[2*e+1]=t.dayLightMap[e];var s=new x.DataTexture(i,t.mapSize,t.mapSize,x.RGIntegerFormat,x.UnsignedByteType);return s.internalFormat="RG8UI",s}function O(t){for(var i=new Uint8Array(t.mapSize*t.mapSize*3),e=0;e<t.mapSize*t.mapSize;e++){var s=t.flagsMap[e];i[3*e+0]=t.textureMap1[e],i[3*e+1]=t.textureMap2[e],i[3*e+2]=s.fTexDirection|s.fReverse<<6}var r=new x.DataTexture(i,t.mapSize,t.mapSize,x.RGBIntegerFormat,x.UnsignedByteType);return r.internalFormat="RGB8UI",r}function T(){return(T=Object(m.a)(_.a.mark((function t(i){var e,s,r,a,n,o,h,u;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new x.Group,t.prev=1,t.next=4,fetch("".concat(z,"/").concat(i,".MAP")).then((function(t){return t.arrayBuffer()}));case 4:return s=t.sent,t.next=7,fetch("".concat(z,"/").concat(i,".RSC")).then((function(t){return t.arrayBuffer()}));case 7:r=t.sent,a=new g.a(new S.a(s)),n=new w.a(new S.a(r),void 0,void 0,a.version),2==a.version&&(M*=2),console.log(n,a),(o=new x.PlaneBufferGeometry(a.mapSize*j,a.mapSize*j,a.mapSize-1,a.mapSize-1)).rotateX(-Math.PI/2),C(n,a,e),h=(new x.Matrix4).multiplyMatrices((new x.Matrix4).makeTranslation(.5,0,.5),(new x.Matrix4).makeScale(1/(a.mapSize*j),1,1/(a.mapSize*j))),(u=new x.MeshBasicMaterial({map:B(n)})).defines={MAP_SIZE:"".concat(a.mapSize,".0"),CARNIVORES:a.version,MAP_HSCALE:"".concat(M,".0")},u.onBeforeCompile=function(t){console.log(t,a,n);var i=A(a),e=O(a);t.uniforms.vertexMap={value:i},t.uniforms.fragmentMap={value:e},t.uniforms.heightmapMatrix={value:h};var s=t.vertexShader;s=(s=(s=s.replace("#include <common>","\n                precision highp usampler2D;\n                uniform usampler2D vertexMap;\n                uniform mat4 heightmapMatrix;\n                varying vec4 vLighting;\n            ")).replace("#include <color_vertex>","\n            vUv = (heightmapMatrix * modelMatrix * vec4(position, 1.0)).xz;\n            uvec4 tex = texture(vertexMap, vUv);\n            #if CARNIVORES == 1\n            float light = 1.0 - (float(tex.g) / 64.0);\n            #else\n            float light = float(tex.g) / 255.0;\n            #endif\n            vLighting = vec4(light, light, light, 1.0);\n            #include <color_vertex>\n            ")).replace("#include <begin_vertex>","\n            #include <begin_vertex>\n            transformed.y += float(tex.r) * MAP_HSCALE;\n            "),t.vertexShader=s;var r=t.fragmentShader;r=(r=r.replace("#include <map_pars_fragment>","\n            precision highp sampler2DArray;\n            precision highp usampler2D;\n            uniform sampler2DArray map;\n            uniform usampler2D fragmentMap;\n            varying vec4 vLighting;\n            ")).replace("#include <map_fragment>","\n            vec2 tilePos = vUv * MAP_SIZE;\n            vec2 localTileUv = tilePos - floor(tilePos);\n            uvec4 tex = texture(fragmentMap, vUv);\n            float triside = ((1.0-localTileUv.x) - localTileUv.y);\n            diffuseColor = vLighting;\n            switch(tex.b & 3u) {\n                case 0u:\n                    //diffuseColor = vec4(1.0, 1.0, 1.0, 1.0);\n                    break;\n                case 1u:\n                    float t = localTileUv.x;\n                    localTileUv.x = localTileUv.y;\n                    localTileUv.y = 1.0 - t;\n                    //diffuseColor = vec4(0.5, 0.0, 0.0, 1.0);\n                    break;\n                case 2u:\n                    localTileUv.x = 1.0 - localTileUv.x;\n                    localTileUv.y = 1.0 - localTileUv.y;\n                    //diffuseColor = vec4(0.5, 0.5, 0.0, 1.0);\n                    break;\n                case 3u:\n                    float x = localTileUv.x;\n                    localTileUv.x = 1.0 - localTileUv.y;\n                    localTileUv.y = x;\n                    //diffuseColor = vec4(0.0, 0.0, 1.0, 1.0);\n                    break;\n            }\n            uint depth = tex.r;\n            #if CARNIVORES == 1\n            if (triside >= 0.0) {\n                depth = (tex.b & 64u) != 0u ? tex.r : tex.g;\n            } else {\n                depth = (tex.b & 64u) != 0u ? tex.g : tex.r;\n            }\n            #endif\n            #ifdef DEBUG_REVERSE_FLAG\n            if ((tex.b & 64u) != 0u) {\n                diffuseColor = vec4(0.6, 0.6, 0.6, 1.0);\n            } else {\n                diffuseColor = vec4(1.0, 1.0, 1.0, 1.0);\n            }\n            #endif\n            vec4 texelColor = texture( map, vec3(localTileUv, depth) );\n            texelColor = mapTexelToLinear( texelColor );\n            diffuseColor *= texelColor;\n            //diffuseColor = vec4(localTileUv, 0.0, 1.0);\n            "),t.fragmentShader=r},e.add(new x.Mesh(o,u)),t.next=26;break;case 22:return t.prev=22,t.t0=t.catch(1),console.error(t.t0),t.abrupt("return",void 0);case 26:return t.abrupt("return",e);case 27:case"end":return t.stop()}}),t,null,[[1,22]])})))).apply(this,arguments)}e(134);var I=function(t){var i,e="pending",s=t.then((function(t){e="success",i=t}),(function(t){e="error",i=t}));return{read:function(){switch(e){case"pending":throw s;case"error":throw i;default:return i}}}},L=e(9),k=I(function(t){return T.apply(this,arguments)}("AREA1"));function R(){var t=k.read();return Object(L.jsx)("primitive",{object:t})}function D(){var t=r.a.useState(!0),i=Object(u.a)(t,2);i[0],i[1];return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)(p.a,{shadows:!0,linear:!0,camera:{position:[0,12e3,12e3],fov:30,near:1,far:1e6},children:[Object(L.jsx)(c.a,{}),Object(L.jsx)("directionalLight",{args:[14674943,1],position:[50,200,100],"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-left":-300,"shadow-camera-right":300,"shadow-camera-top":300,"shadow-camera-bottom":-300,"shadow-camera-far":1e3,castShadow:!0}),Object(L.jsx)("ambientLight",{args:[6710886]}),Object(L.jsx)(d.a,{}),Object(L.jsx)(s.Suspense,{fallback:Object(L.jsx)(f.a,{center:!0,children:"Loading, please wait"}),children:Object(L.jsx)(R,{})})]})})}var V=e(78),F=e.n(V),E=e(10),P=e(23),N=function(t){var i=t.drawContent,e=t.width,s=t.height,a=Object(P.a)(t,["drawContent","width","height"]),n=r.a.useRef(null);return r.a.useEffect((function(){var t=n.current,r=null===t||void 0===t?void 0:t.getContext("2d");t&&r&&(void 0!==e&&(r.canvas.width=e),void 0!==s&&(r.canvas.height=s),i?i(r):(r.fillStyle="#000000",r.fillRect(0,0,r.canvas.width,r.canvas.height)))}),[i,s,e]),Object(L.jsx)("canvas",Object(E.a)({ref:n},a))},G=function(t,i){for(var e=new ImageData(t.mapSize,t.mapSize),s=0;s<t.mapSize*t.mapSize;s++)e.data[4*s+0]=t[i][s],e.data[4*s+1]=t[i][s],e.data[4*s+2]=t[i][s],e.data[4*s+3]=255;return e},W=function(t){var i=t.value,e=void 0===i?0:i,s=t.bitCount,r=void 0===s?8:s,a=t.onChange;return Object(L.jsxs)("select",{value:e,onChange:function(t){return a(parseFloat(t.target.value))},children:[Object(L.jsx)("option",{value:"-1",children:"n/a"}),new Array(r).fill(0).map((function(t,i){return Object(L.jsxs)("option",{value:i,children:["bit ",i]},i)}))]})};function H(){var t=r.a.useState(null),i=Object(u.a)(t,2),e=i[0],s=i[1],a=r.a.useState(null),n=Object(u.a)(a,2),o=n[0],h=n[1],c=r.a.useState(-1),d=Object(u.a)(c,2),f=d[0],p=d[1],l=r.a.useState(-1),_=Object(u.a)(l,2),m=_[0],v=_[1],x=r.a.useState(-1),y=Object(u.a)(x,2),g=y[0],b=y[1],w=r.a.useState(1),z=Object(u.a)(w,2),j=z[0],M=z[1];var U=function(){var t;switch(j){case 0:t=function(t,i,e,s){for(var r=new ImageData(t.mapSize,t.mapSize),a=function(t,i){return 0!==(t&1<<i)?0:255},n=0;n<t.mapSize*t.mapSize;n++){var o=t.flagsMap[n];r.data[4*n+0]=-1!==i?a(o,i):0,r.data[4*n+1]=-1!==e?a(o,e):0,r.data[4*n+2]=-1!==s?a(o,s):0,r.data[4*n+3]=255}return r}(e,f,m,g);break;case 1:t=G(e,"heightMap");break;case 2:t=G(e,"waterMap")}return t};return Object(L.jsx)("div",{onDragOver:function(t){t.preventDefault()},onDrop:function(t){var i;if(t.preventDefault(),null===(i=t.dataTransfer.files)||void 0===i?void 0:i.length){var e=t.dataTransfer.files[0].name,r=URL.createObjectURL(t.dataTransfer.files[0]);fetch(r).then((function(t){return t.arrayBuffer()})).then((function(t){var i=new F.a(new S.a(t));h(e),s(i)}))}},style:{width:"100%",height:"100%",margin:"5px",userSelect:"text"},children:e&&o?Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("h1",{children:o}),Object(L.jsxs)("select",{value:j,onChange:function(t){return M(parseInt(t.target.value))},children:[Object(L.jsx)("option",{value:"0",children:"Flags"}),Object(L.jsx)("option",{value:"1",children:"Heightmap"}),Object(L.jsx)("option",{value:"2",children:"Watermap"})]}),0===j&&Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(W,{value:f,bitCount:16,onChange:function(t){return p(t)}}),Object(L.jsx)(W,{value:m,bitCount:16,onChange:function(t){return v(t)}}),Object(L.jsx)(W,{value:g,bitCount:16,onChange:function(t){return b(t)}})]}),Object(L.jsx)("button",{onClick:function(){var t=U();if(t){var i=document.createElement("canvas"),e=i.getContext("2d");if(e){e.canvas.width=t.width,e.canvas.height=t.height,e.putImageData(t,0,0);var s=i.toDataURL("image/png"),r=(null===o||void 0===o?void 0:o.replace(/\.MAP$/i,""))||"";switch(j){case 0:r+="-r".concat(f,"g").concat(m,"b").concat(g,".png");break;case 1:r+="-height.png";break;case 2:r+="-water.png"}var a=document.createElement("a");a.setAttribute("download",r),a.setAttribute("href",s.replace("image/png","image/octet-stream")),a.click()}}},children:"Download"}),Object(L.jsx)("br",{}),Object(L.jsx)("br",{}),Object(L.jsx)(N,{width:e.mapSize,height:e.mapSize,drawContent:function(t){var i=U();i&&t.putImageData(i,0,0)}})]}):Object(L.jsx)("h1",{children:"Drop a Carnivores 1/2/IceAge MAP file here"})})}function K(){return Object(L.jsx)("div",{})}function J(){return Object(L.jsx)(o.a,{children:Object(L.jsxs)(h.c,{children:[Object(L.jsx)(h.a,{exact:!0,path:"/",children:Object(L.jsx)(D,{})}),Object(L.jsx)(h.a,{path:"/edit-map",children:Object(L.jsx)(H,{})}),Object(L.jsx)(h.a,{path:"/edit-model",children:Object(L.jsx)(K,{})})]})})}var Y=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,148)).then((function(i){var e=i.getCLS,s=i.getFID,r=i.getFCP,a=i.getLCP,n=i.getTTFB;e(t),s(t),r(t),a(t),n(t)}))};n.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(J,{})}),document.getElementById("root")),Y()},72:function(t,i,e){var s,r,a=void 0;s=this,r=function(t){return function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}t.prototype._read=function(){this.heightMap=new Array(this.mapSize*this.mapSize);for(var t=0;t<this.mapSize*this.mapSize;t++)this.heightMap[t]=this._io.readU1();for(this.textureMap1=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.version){case 1:this.textureMap1[t]=this._io.readU1();break;case 2:this.textureMap1[t]=this._io.readU2le()}for(this.textureMap2=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.version){case 1:this.textureMap2[t]=this._io.readU1();break;case 2:this.textureMap2[t]=this._io.readU2le()}for(this.objectMap=this._io.readBytes(this.mapSize*this.mapSize),this.flagsMap=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.version){case 1:this.flagsMap[t]=new i(this._io,this,this._root);break;case 2:this.flagsMap[t]=new e(this._io,this,this._root)}2==this.version&&(this.dawnLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.dayLightMap=this._io.readBytes(this.mapSize*this.mapSize),2==this.version&&(this.nightLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.waterMap=this._io.readBytes(this.mapSize*this.mapSize),this.objectHeightMap=this._io.readBytes(this.mapSize*this.mapSize),this.fogsMap=this._io.readBytes(Math.floor(this.mapSize*this.mapSize/4)),this.ambientMap=this._io.readBytes(Math.floor(this.mapSize*this.mapSize/4))};var i=t.FlagsV1=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.fTexDirection=this._io.readBitsIntLe(2),this.fModelDirection=this._io.readBitsIntLe(3),this.fNoWay=0!=this._io.readBitsIntLe(1),this.fReverse=0!=this._io.readBitsIntLe(1),this.fWater=0!=this._io.readBitsIntLe(1)},t}(),e=t.FlagsV2=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.fTexDirection=this._io.readBitsIntLe(2),this.fModelDirection=this._io.readBitsIntLe(2),this.fReverse=0!=this._io.readBitsIntLe(1),this.fNoWay=0!=this._io.readBitsIntLe(1),this.unused1=0!=this._io.readBitsIntLe(1),this.fWater=0!=this._io.readBitsIntLe(1),this.fTex2Direction=this._io.readBitsIntLe(2),this.unused2=this._io.readBitsIntLe(5),this.fWater2=0!=this._io.readBitsIntLe(1)},t}();return Object.defineProperty(t.prototype,"version",{get:function(){return void 0!==this._m_version||(this._m_version=2228224==this._io.size?1:14155776==this._io.size?2:0),this._m_version}}),Object.defineProperty(t.prototype,"isValid",{get:function(){return void 0!==this._m_isValid||(this._m_isValid=1==this.version||2==this.version),this._m_isValid}}),Object.defineProperty(t.prototype,"mapSize",{get:function(){return void 0!==this._m_mapSize||(this._m_mapSize=512*this.version),this._m_mapSize}}),t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream"],r):t.exports?t.exports=r(e(20)):s.Map=r(s.KaitaiStream)},73:function(t,i,e){var s,r,a=void 0;s=this,r=function(t,i){return function(){function t(t,i,e,s){this._io=t,this._parent=i,this._root=e||this,this.version=s,this._read()}t.AudioReverb=Object.freeze({GENERIC:0,PLATE:1,FOREST:2,MOUNTAIN:3,CANYON:4,CAVE:5,SPECIAL2:6,UNUSED:7,0:"GENERIC",1:"PLATE",2:"FOREST",3:"MOUNTAIN",4:"CANYON",5:"CAVE",6:"SPECIAL2",7:"UNUSED"}),t.prototype._read=function(){this.textureCount=this._io.readU4le(),this.modelCount=this._io.readU4le(),2==this.version&&(this.dawnSkyRgb=new e(this._io,this,this._root)),this.daySkyRgb=new e(this._io,this,this._root),2==this.version&&(this.nightSkyRgb=new e(this._io,this,this._root)),2==this.version&&(this.dawnSkyTRgb=new e(this._io,this,this._root)),this.daySkyTRgb=new e(this._io,this,this._root),2==this.version&&(this.nightSkyTRgb=new e(this._io,this,this._root)),this.textures=new Array(this.textureCount);for(var t=0;t<this.textureCount;t++)this.textures[t]=new c(this._io,this,this._root);for(this.models=new Array(this.modelCount),t=0;t<this.modelCount;t++)this.models[t]=new s(this._io,this,this._root);if(2==this.version)for(this.dawnSkyTexture=new Array(Math.floor(this.skyTextureSize/2)),t=0;t<Math.floor(this.skyTextureSize/2);t++)this.dawnSkyTexture[t]=this._io.readU2le();for(this.daySkyTexture=new Array(Math.floor(this.skyTextureSize/2)),t=0;t<Math.floor(this.skyTextureSize/2);t++)this.daySkyTexture[t]=this._io.readU2le();if(2==this.version)for(this.nightSkyTexture=new Array(Math.floor(this.skyTextureSize/2)),t=0;t<Math.floor(this.skyTextureSize/2);t++)this.nightSkyTexture[t]=this._io.readU2le();for(this.cloudsMap=this._io.readBytes(16384),this.fogCount=this._io.readU4le(),this.fogList=new Array(this.fogCount),t=0;t<this.fogCount;t++)this.fogList[t]=new o(this._io,this,this._root);for(this.randomSoundCount=this._io.readU4le(),this.randomSounds=new Array(this.randomSoundCount),t=0;t<this.randomSoundCount;t++)this.randomSounds[t]=new u(this._io,this,this._root);for(this.ambientSoundCount=this._io.readU4le(),this.ambientSounds=new Array(this.ambientSoundCount),t=0;t<this.ambientSoundCount;t++)this.ambientSounds[t]=new h(this._io,this,this._root);if(2==this.version&&(this.waterCount=this._io.readU4le()),2==this.version)for(this.waters=new Array(this.waterCount),t=0;t<this.waterCount;t++)this.waters[t]=new n(this._io,this,this._root)};var e=t.Rgb=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.r=this._io.readU4le(),this.g=this._io.readU4le(),this.b=this._io.readU4le()},t}(),s=t.Model=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.radius=this._io.readS4le(),this.yLo=this._io.readS4le(),this.yHi=this._io.readS4le(),this.lineLength=this._io.readS4le(),this.lIntensity=this._io.readS4le(),this.circleRad=this._io.readS4le(),this.cIntensity=this._io.readS4le(),this.fPlaceWater=0!=this._io.readBitsIntLe(1),this.fPlaceGround=0!=this._io.readBitsIntLe(1),this.fPlaceUser=0!=this._io.readBitsIntLe(1),this.fCircle=0!=this._io.readBitsIntLe(1),this.fBound=0!=this._io.readBitsIntLe(1),this.fNoBmp=0!=this._io.readBitsIntLe(1),this.fNoLight=0!=this._io.readBitsIntLe(1),this.fDefaultLight=0!=this._io.readBitsIntLe(1),this.fGroundLight=0!=this._io.readBitsIntLe(1),this.fNoSoft=0!=this._io.readBitsIntLe(1),this.fNoSoft2=0!=this._io.readBitsIntLe(1),this.fUnused=this._io.readBitsIntLe(20),this.fIsAnimated=0!=this._io.readBitsIntLe(1),this._io.alignToByte(),this.grRad=this._io.readS4le(),this.refLight=this._io.readS4le(),this.lastAniTime=this._io.readU4le(),this.boundR=this._io.readF4le(),this.reserved=this._io.readBytes(16),this.model=new i(this._io,this,null),2==this._root.version&&(this.billboard=new c(this._io,this,this._root)),this.fIsAnimated&&(this.animation=new a(this._io,this,this._root))},t}(),r=t.Trd=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.rNumber=this._io.readU4le(),this.rVolume=this._io.readU4le(),this.rFrequency=this._io.readU4le(),this.rEnvironment=this._io.readU2le(),this.rfNotAtNight=0!=this._io.readBitsIntLe(1),this.rfUnused=this._io.readBitsIntLe(15)},t}(),a=t.ModelAnimation=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.vc0=this._io.readU4le(),this.vc1=this._io.readU4le(),this.vc2=this._io.readU4le(),this.kps=this._io.readU4le(),this.frameCount=this._io.readU4le(),this.frames=new Array(3*this.frameCount*this.vc1);for(var t=0;t<3*this.frameCount*this.vc1;t++)this.frames[t]=this._io.readS2le()},t}(),n=t.Water=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.textureIndex=this._io.readU4le(),this.level=this._io.readU4le(),this.opacity=this._io.readF4le(),this.fogRgb=this._io.readU4le()},t}(),o=t.FogEntry=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.fogRgb=this._io.readU4le(),this.yBegin=this._io.readF4le(),this.mortal=this._io.readU4le(),this.transp=this._io.readF4le(),this.fLimit=this._io.readF4le()},t}(),h=t.AmbientSound=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.pcmSize=this._io.readU4le(),this.pcm=this._io.readBytes(this.pcmSize),this.rData=new Array(16);for(var t=0;t<16;t++)this.rData[t]=new r(this._io,this,this._root);this.rsfxCount=this._io.readU4le(),this.aVolume=this._io.readU4le()},t}(),u=t.RandomSound=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.pcmSize=this._io.readU4le(),this.pcm=this._io.readBytes(this.pcmSize)},t}(),c=t.Texture=function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.data=new Array(16384);for(var t=0;t<16384;t++)this.data[t]=this._io.readU2le()},t}();return Object.defineProperty(t.prototype,"skyTextureSize",{get:function(){return void 0!==this._m_skyTextureSize||(this._m_skyTextureSize=131072),this._m_skyTextureSize}}),t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream","./C3df"],r):t.exports?t.exports=r(e(20),e(131)):s.Rsc=r(s.KaitaiStream,s.C3df)},78:function(t,i,e){var s,r,a;r=[e(20)],void 0===(a="function"===typeof(s=function(t){return function(){function t(t,i,e){this._io=t,this._parent=i,this._root=e||this,this._read()}return t.prototype._read=function(){this.heightMap=this._io.readBytes(this.mapSize*this.mapSize),this.textureMap1=new Array(this.mapSize*this.mapSize);for(var t=0;t<this.mapSize*this.mapSize;t++)switch(this.isV1){case!0:this.textureMap1[t]=this._io.readU1();break;case!1:this.textureMap1[t]=this._io.readU2le()}for(this.textureMap2=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.isV1){case!0:this.textureMap2[t]=this._io.readU1();break;case!1:this.textureMap2[t]=this._io.readU2le()}for(this.objectMap=this._io.readBytes(this.mapSize*this.mapSize),this.flagsMap=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.isV1){case!0:this.flagsMap[t]=this._io.readU1();break;case!1:this.flagsMap[t]=this._io.readU2le()}this.isV1&&(this.lightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.isV2&&(this.dawnLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.isV2&&(this.dayLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.isV2&&(this.nightLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.waterMap=this._io.readBytes(this.mapSize*this.mapSize),this.objectHeightMap=this._io.readBytes(this.mapSize*this.mapSize),this.fogsMap=this._io.readBytes(Math.floor(this.mapSize*this.mapSize/4)),this.ambientMap=this._io.readBytes(Math.floor(this.mapSize*this.mapSize/4))},Object.defineProperty(t.prototype,"isV1",{get:function(){return void 0!==this._m_isV1||(this._m_isV1=2228224==this._io.size),this._m_isV1}}),Object.defineProperty(t.prototype,"isV2",{get:function(){return void 0!==this._m_isV2||(this._m_isV2=14155776==this._io.size),this._m_isV2}}),Object.defineProperty(t.prototype,"isValid",{get:function(){return void 0!==this._m_isValid||(this._m_isValid=this.isV1||this.isV2),this._m_isValid}}),Object.defineProperty(t.prototype,"mapSize",{get:function(){return void 0!==this._m_mapSize||(this._m_mapSize=this.isV1?512:1024),this._m_mapSize}}),t}()})?s.apply(i,r):s)||(t.exports=a)},84:function(t,i,e){}},[[142,1,2]]]);
//# sourceMappingURL=main.bba8a90c.chunk.js.map