(this.webpackJsonpwebcarnivores=this.webpackJsonpwebcarnivores||[]).push([[0],{111:function(t,e){},112:function(t,e){},115:function(t,e){},117:function(t,e){},137:function(t,e,i){var r,s,a=void 0;r=this,s=function(t,e,i){return function(){function r(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}r.prototype._read=function(){this.vertCount=this._io.readU4le(),this.faceCount=this._io.readU4le(),this.nodeCount=this._io.readU4le(),this.textureSize=this._io.readU4le(),this.faces=new Array(this.faceCount);for(var t=0;t<this.faceCount;t++)this.faces[t]=new i(this._io,this,null);for(this.vertices=new Array(this.vertCount),t=0;t<this.vertCount;t++)this.vertices[t]=new e(this._io,this,null);for(this.nodes=new Array(this.nodeCount),t=0;t<this.nodeCount;t++)this.nodes[t]=new s(this._io,this,this._root);this.textureData=this._io.readBytes(this.textureWidth*this.textureHeight*2)};var s=r.Node=function(){function e(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return e.prototype._read=function(){this.name=t.bytesToStr(t.bytesTerminate(this._io.readBytes(32),0,!1),"utf8"),this.x=this._io.readF4le(),this.y=this._io.readF4le(),this.z=this._io.readF4le(),this.owner=this._io.readS2le(),this.hide=this._io.readU2le()},e}();return Object.defineProperty(r.prototype,"textureWidth",{get:function(){return void 0!==this._m_textureWidth||(this._m_textureWidth=256),this._m_textureWidth}}),Object.defineProperty(r.prototype,"textureHeight",{get:function(){return void 0!==this._m_textureHeight||(this._m_textureHeight=Math.floor(Math.floor(this.textureSize/2)/this.textureWidth)),this._m_textureHeight}}),r}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream","./Vertex","./Face"],s):t.exports?t.exports=s(i(16),i(71),i(72)):r.C3df=s(r.KaitaiStream,r.Vertex,r.Face)},138:function(t,e,i){var r,s,a=void 0;r=this,s=function(t){return function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.ix=this._io.readS2le(),this.iy=this._io.readS2le(),this.iz=this._io.readS2le()},Object.defineProperty(t.prototype,"x",{get:function(){return void 0!==this._m_x||(this._m_x=this.ix/16),this._m_x}}),Object.defineProperty(t.prototype,"y",{get:function(){return void 0!==this._m_y||(this._m_y=this.iy/16),this._m_y}}),Object.defineProperty(t.prototype,"z",{get:function(){return void 0!==this._m_z||(this._m_z=this.iz/16),this._m_z}}),t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream"],s):t.exports?t.exports=s(i(16)):r.Ivector=s(r.KaitaiStream)},145:function(t,e,i){"use strict";i.r(e);var r=i(4),s=i.n(r),a=i(34),n=i.n(a),o=(i(88),i(83)),h=i(13),u=i(12),c=(i(89),i(150)),d=i(149),f=i(148),p=i(7),l=i(0),_=i(1),m=i(2),v=function(t){Object(_.a)(i,t);var e=Object(m.a)(i);function i(t){var r,s=t.vertexMap,a=t.fragmentMap,n=t.mapSize,o=t.version,h=t.yScale,u=t.textureArray,c=t.heightmapMatrix;return Object(l.a)(this,i),(r=e.call(this,{map:u,fog:!0})).defines={MAP_SIZE:"".concat(n,".0"),CARNIVORES:o,MAP_HSCALE:"".concat(h,".0")},r.onBeforeCompile=function(t){t.uniforms.vertexMap={value:s},t.uniforms.fragmentMap={value:a},t.uniforms.heightmapMatrix={value:c};var e=t.vertexShader;e=(e=(e=e.replace("#include <common>","\n                precision highp usampler2D;\n                uniform usampler2D vertexMap;\n                uniform mat4 heightmapMatrix;\n                varying vec4 vLighting;\n            ")).replace("#include <color_vertex>","\n            vUv = (heightmapMatrix * modelMatrix * vec4(position, 1.0)).xz;\n            uvec4 tex = texture(vertexMap, vUv);\n            #if CARNIVORES == 1\n            float light = 1.0 - (float(tex.g) / 64.0);\n            #else\n            float light = float(tex.g) / 255.0;\n            #endif\n            vLighting = vec4(light, light, light, 1.0);\n            #include <color_vertex>\n            ")).replace("#include <begin_vertex>","\n            #include <begin_vertex>\n            transformed.y += float(tex.r) * MAP_HSCALE;\n            "),t.vertexShader=e;var i=t.fragmentShader;i=(i=i.replace("#include <map_pars_fragment>","\n            precision highp sampler2DArray;\n            precision highp usampler2D;\n            uniform sampler2DArray map;\n            uniform usampler2D fragmentMap;\n            varying vec4 vLighting;\n            ")).replace("#include <map_fragment>","\n            vec2 tilePos = vUv * MAP_SIZE;\n            vec2 localTileUv = tilePos - floor(tilePos);\n            uvec4 tex = texture(fragmentMap, vUv);\n            float triside = ((1.0-localTileUv.x) - localTileUv.y);\n            diffuseColor = vLighting;\n            switch(tex.b & 3u) {\n                case 0u:\n                    //diffuseColor = vec4(1.0, 1.0, 1.0, 1.0);\n                    break;\n                case 1u:\n                    float t = localTileUv.x;\n                    localTileUv.x = localTileUv.y;\n                    localTileUv.y = 1.0 - t;\n                    //diffuseColor = vec4(0.5, 0.0, 0.0, 1.0);\n                    break;\n                case 2u:\n                    localTileUv.x = 1.0 - localTileUv.x;\n                    localTileUv.y = 1.0 - localTileUv.y;\n                    //diffuseColor = vec4(0.5, 0.5, 0.0, 1.0);\n                    break;\n                case 3u:\n                    float x = localTileUv.x;\n                    localTileUv.x = 1.0 - localTileUv.y;\n                    localTileUv.y = x;\n                    //diffuseColor = vec4(0.0, 0.0, 1.0, 1.0);\n                    break;\n            }\n            uint depth = tex.r;\n            #if CARNIVORES == 1\n            if (triside >= 0.0) {\n                depth = (tex.b & 64u) != 0u ? tex.r : tex.g;\n            } else {\n                depth = (tex.b & 64u) != 0u ? tex.g : tex.r;\n            }\n            #endif\n            #ifdef DEBUG_REVERSE_FLAG\n            if ((tex.b & 64u) != 0u) {\n                diffuseColor = vec4(0.6, 0.6, 0.6, 1.0);\n            } else {\n                diffuseColor = vec4(1.0, 1.0, 1.0, 1.0);\n            }\n            #endif\n            vec4 texelColor = texture( map, vec3(localTileUv, depth) );\n            texelColor = mapTexelToLinear( texelColor );\n            diffuseColor *= texelColor;\n            //diffuseColor = vec4(localTileUv, 0.0, 1.0);\n            "),t.fragmentShader=i},r}return i}(p.MeshBasicMaterial),y=i(8);var S=function(t){var e=t.rsc,i=t.map,r=t.viewDistance,a=(void 0===r&&i.mapSize,t.position),n=void 0===a?[0,0,0]:a,o=s.a.useMemo((function(){var t=i.mapSize,r=i.version,s=i.yScale,a=function(t){for(var e=new Uint8Array(t.mapSize*t.mapSize*2),i=0;i<t.mapSize*t.mapSize;i++)e[2*i+0]=t.heightMap[i],e[2*i+1]=t.dayLightMap[i];var r=new p.DataTexture(e,t.mapSize,t.mapSize,p.RGIntegerFormat,p.UnsignedByteType);return r.internalFormat="RG8UI",r}(i),n=function(t){for(var e=new Uint8Array(t.mapSize*t.mapSize*3),i=0;i<t.mapSize*t.mapSize;i++){var r=t.flagsMap[i];e[3*i+0]=t.textureMap1[i],e[3*i+1]=t.textureMap2[i],e[3*i+2]=r.fTexDirection|r.fReverse<<6}var s=new p.DataTexture(e,t.mapSize,t.mapSize,p.RGBIntegerFormat,p.UnsignedByteType);return s.internalFormat="RGB8UI",s}(i),o=function(t){for(var e=new Uint16Array(t.textureCount*t.textures[0].width*t.textures[0].height),i=0,r=0;r<t.textureCount;r++)for(var s=0;s<t.textures[0].width*t.textures[0].height;s++){var a=t.textures[r].data[2*s+1]<<8|t.textures[r].data[2*s],n=a>>10&31,o=(a>>5&31)<<1,h=a>>0&31;e[i++]=(n<<11)+(o<<5)+h}var u=new p.DataTexture2DArray(e,t.textures[0].width,t.textures[0].height,t.textureCount);return u.type=p.UnsignedShort565Type,u.format=p.RGBFormat,u.wrapT=u.wrapS=p.RepeatWrapping,u}(e),h=(new p.Matrix4).makeScale(1/(i.mapSize*i.tileSize),1,1/(i.mapSize*i.tileSize));return new v({vertexMap:a,fragmentMap:n,mapSize:t,version:r,yScale:s,textureArray:o,heightmapMatrix:h})}),[i,e]),h=s.a.useMemo((function(){var t=new p.PlaneBufferGeometry(i.mapSize*i.tileSize,i.mapSize*i.tileSize,i.mapSize-1,i.mapSize-1);return t.rotateX(-Math.PI/2),t.translate(i.mapSize*i.tileSize/2,0,i.mapSize*i.tileSize/2),t}),[i.mapSize,i.tileSize]);return Object(y.jsx)("mesh",{position:n,geometry:h,material:o})},x=i(22),g=i.n(x),b=i(48),w=i(16),z=i.n(w),j=i(74),M=i.n(j),U=i(75),B=i.n(U);function C(t){var e=t.mapSize,i=[];function r(e,i){return t.heightMap[i*t.mapSize+e]*t.yScale}for(var s=0;s<e;s++)for(var a=0;a<e;a++){254===t.objectMap[s*e+a]&&i.push(new p.Vector3(a*t.tileSize,r(a,s),s*t.tileSize))}return i}function O(){return(O=Object(b.a)(g.a.mark((function t(e,i){var r,s,a,n,o,h,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=function(t,e){return Math.max(h(t,e),h(t-90,e-90),h(t+90,e-90),h(t-90,e+90),h(t+90,e+90),h(t+128,e),h(t-128,e),h(t,e+128),h(t,e-128))},h=function(t,e){var i=a.tileSize,r=a.mapSize,s=1==a.version?"waterMap":"heightMap",n=1==a.version?48:0;t<0&&(t=0),e<0&&(e=0);var o=Math.floor(t/i),h=Math.floor(e/i),u=Math.floor(t%i),c=Math.floor(e%i),d=a[s][h*r+o],f=a[s][h*r+o+1],p=a[s][(h+1)*r+o+1],l=a[s][(h+1)*r+o];return a.flagsMap[h*r+o].fReverse?256-u>c?p=f+l-d:d=f+l-p:u>c?l=d+p-f:f=d+p-l,(((d*(256-u)+f*u)*(256-c)+(l*(256-u)+p*u)*c)/256/256-n)*a.yScale},t.next=4,fetch(e).then((function(t){return t.arrayBuffer()}));case 4:return r=t.sent,t.next=7,fetch(i).then((function(t){return t.arrayBuffer()}));case 7:return s=t.sent,a=new M.a(new z.a(r)),n=new B.a(new z.a(s),void 0,void 0,a.version),console.log(n,a),o=C(a),t.abrupt("return",{map:a,rsc:n,landings:o,getHeightAt:u});case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=i(14),T=i(3),k=i(77),L=i(76),I=i.n(L);function E(t,e,i){for(var r=new Uint16Array(e*i),s=0,a=0;a<i;a++)for(var n=0;n<e;n++){var o=a*e+n,h=t[2*o+1]<<8|t[2*o],u=h>>10&31,c=h>>5&31,d=h>>0&31,f=h?1:0;r[s++]=(u<<11)+(c<<6)+(d<<1)|f}var l=new p.DataTexture(r,e,i,p.RGBAFormat,p.UnsignedShort5551Type);return l.needsUpdate=!0,l}var R=function(t){Object(_.a)(i,t);var e=Object(m.a)(i);function i(t){return Object(l.a)(this,i),e.call(this,t)}return Object(T.a)(i,[{key:"load",value:function(t,e,i,r){var s=this;fetch(t).then((function(t){return t.arrayBuffer()})).then((function(t){e(s.parse(t))})).catch((function(t){r(t)}))}},{key:"parse",value:function(t){for(var e,i,r=new I.a(new z.a(t)),s=r.animations.flatMap((function(t){return t.frames})),a=new Array(s.length),n=[],o=[],h=r.faces,u=r.vertices,c=0;c<s.length;c++)a[c]=new Array;function d(t,e,i){var r=u[t],h=r.x,c=r.y,d=r.z;h*=2,c*=2,d*=2,n.push(h,c,d),o.push(e,i),s.forEach((function(e,i){a[i].push(2*e.vertices[t].x,2*e.vertices[t].y,2*e.vertices[t].z)}))}h.forEach((function(t){var e=t.v1,i=t.v2,r=t.v3;d(e,t.tax/256,t.tay/256),d(i,t.tbx/256,t.tby/256),d(r,t.tcx/256,t.tcy/256)}));var f=new p.BufferGeometry;f.setAttribute("position",new p.Float32BufferAttribute(n,3)),f.setAttribute("uv",new p.Float32BufferAttribute(o,2)),f.morphAttributes.position=[];var l=0;null===(e=r.animations)||void 0===e||e.forEach((function(t){var e=t.name;t.frames.forEach((function(t,i){var r=new p.Float32BufferAttribute(a[l],3);r.name="".concat(e,".").concat(i),f.morphAttributes.position.push(r),++l}))}));var _=new p.MeshBasicMaterial({map:E(r.textureData,r.textureWidth,r.textureHeight),side:p.DoubleSide,morphTargets:!0}),m=new k.a(f,_);return l=0,null===(i=r.animations)||void 0===i||i.forEach((function(t){m.createAnimation(t.name,l,l+t.frameCount-1,t.framesPerSecond),l+=t.frameCount})),m}}]),i}(p.Loader),D={forward:!1,backward:!1,left:!1,right:!1,run:!1,anim:0};function V(t){var e="keydown"===t.type;if(!t.altKey)switch(t.key.toLowerCase()){case"1":D.anim=1;break;case"2":D.anim=2;break;case"3":D.anim=3;break;case"4":D.anim=4;break;case"5":D.anim=5;break;case"6":D.anim=6;break;case"w":D.forward=e;break;case"s":D.backward=e;break;case"a":D.left=e;break;case"d":D.right=e;break;case"shift":D.run=e;break;default:console.log(t.key,e)}}function F(t){var e=t.getHeightAt,i=t.landings,r=Object(A.e)(R,"HUNTDAT/STEGO.CAR");console.log(r);var a=0;s.a.useEffect((function(){return document.addEventListener("keydown",V),document.addEventListener("keyup",V),function(){document.removeEventListener("keydown",V),document.removeEventListener("keyup",V)}}));var n=new p.Vector3,o=new p.Vector3,h=new p.Vector3,u=i[Math.floor(i.length*Math.random())],c=!0,d=new p.Clock;return Object(A.d)((function(t){var i=t.camera,s=d.getDelta();if(c&&(i.position.copy(u),c=!1),D.anim!=a){var f=a;a=D.anim;var p=Object.keys(r.animationsMap);if(0!=f){r.stopAnimation(p[f]);for(var l=0;l<r.morphTargetInfluences.length;l++)r.morphTargetInfluences[l]=0}r.playAnimation(p[a])}n.x-=10*n.x*s,n.z-=10*n.z*s,n.y-=9.8*100*s,o.z=Number(D.forward)-Number(D.backward),o.x=Number(D.right)-Number(D.left),o.normalize();var _=7e3*(D.run?4:1);(D.forward||D.backward)&&(n.z-=o.z*_*s),(D.left||D.right)&&(n.x-=o.x*_*s),h.setFromMatrixColumn(i.matrix,0),i.position.addScaledVector(h,-n.x*s),h.setFromMatrixColumn(i.matrix,0),h.crossVectors(i.up,h),i.position.addScaledVector(h,-n.z*s),i.position.y+=n.y*s;var m=e(i.position.x,i.position.z);i.position.y<m+220&&(n.y=0,i.position.y=m+220),r&&r.update(s)})),Object(y.jsx)("primitive",{object:r,scale:10,position:[65536,4e3,65536]})}var P=function(t){var e=t.map,i=t.rsc,r=s.a.useMemo((function(){var t=E(i.daySkyTexture,i.skyTextureWidth,i.skyTextureHeight);return t.wrapS=t.wrapT=p.RepeatWrapping,t.anisotropy=16,t.repeat.set(10,10),t}),[i]),a=e.mapSize*e.tileSize/2;return Object(A.d)((function(){r.offset.x+=2e-4})),Object(y.jsxs)("mesh",{position:[a,0,a],children:[Object(y.jsx)("sphereBufferGeometry",{args:[e.mapSize*e.tileSize]}),Object(y.jsx)("meshBasicMaterial",{map:r,side:p.DoubleSide})]})},H=function(t){Object(_.a)(i,t);var e=Object(m.a)(i);function i(t){var r;Object(l.a)(this,i),r=e.call(this);var s=t.faces,a=t.vertices,n=[],o=[];return s.forEach((function(t){var e=t.v1,i=t.v2,r=t.v3;n.push(2*a[e].x,2*a[e].y,2*a[e].z),o.push(t.tax/256,t.tay/256),n.push(2*a[i].x,2*a[i].y,2*a[i].z),o.push(t.tbx/256,t.tby/256),n.push(2*a[r].x,2*a[r].y,2*a[r].z),o.push(t.tcx/256,t.tcy/256)})),r.setAttribute("position",new p.Float32BufferAttribute(n,3)),r.setAttribute("uv",new p.Float32BufferAttribute(o,2)),r.computeVertexNormals(),r}return i}(p.BufferGeometry);var N=function(t){var e=t.map,i=t.rsc,r=t.getHeightAt,a=s.a.useMemo((function(){for(var t=e.mapSize,s=e.objectMap,a=e.tileSize,n=new p.Group,o=[],h=new p.Matrix4,u=0;u<t;u++)for(var c=0;c<t;c++){var d=s[u*t+c];d<254&&(h.makeTranslation(c*a,r(c*a,u*a),u*a),o[d]?o[d].push.apply(o[d],h.toArray()):o[d]=h.toArray())}return i.models.forEach((function(t,e){if(o[e]){for(var i=o[e].length/16,r=new H(t.model),s=E(t.model.textureData,t.model.textureWidth,t.model.textureHeight),a=new p.InstancedMesh(r,new p.MeshBasicMaterial({map:s,fog:!0,transparent:!0,alphaTest:.5,side:p.DoubleSide}),i),u=0;u<i;u++)h.fromArray(o[e],16*u),a.setMatrixAt(u,h);n.add(a)}})),n}),[i,e,r]);return Object(y.jsx)("primitive",{object:a})};var W=function(t){var e=t.mapUrl,i=t.rscUrl,r=s.a.useState(),a=Object(u.a)(r,2),n=a[0],o=a[1];return s.a.useEffect((function(){(function(t,e){return O.apply(this,arguments)})(e,i).then((function(t){o(t)}))}),[e,i]),n?Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(A.a,{shadows:!0,linear:!0,camera:{fov:30,near:1,far:1e6},children:[Object(y.jsx)(c.a,{}),Object(y.jsx)(d.a,{}),Object(y.jsxs)(s.a.Suspense,{fallback:Object(y.jsx)(f.a,{center:!0,children:"Loading, please wait"}),children:[Object(y.jsx)(P,{rsc:n.rsc,map:n.map}),Object(y.jsx)(S,{rsc:n.rsc,map:n.map}),Object(y.jsx)(N,{rsc:n.rsc,map:n.map,getHeightAt:n.getHeightAt}),Object(y.jsx)(F,{landings:n.landings,getHeightAt:n.getHeightAt})]})]})}):Object(y.jsx)(y.Fragment,{})};function G(){var t=s.a.useState({map:"HUNTDAT/AREAS/AREA1.MAP",rsc:"HUNTDAT/AREAS/AREA1.RSC"}),e=Object(u.a)(t,2),i=e[0],r=e[1];return Object(y.jsx)("div",{onDragOver:function(t){t.preventDefault()},onDrop:function(t){var e;if(t.preventDefault(),null===(e=t.dataTransfer.files)||void 0===e?void 0:e.length){for(var i=null,s=null,a=0;a<t.dataTransfer.files.length;a++){var n=t.dataTransfer.files[a];n.name.toUpperCase().endsWith(".MAP")?i=URL.createObjectURL(n):n.name.toUpperCase().endsWith(".RSC")&&(s=URL.createObjectURL(n))}i&&s&&r({map:i,rsc:s})}},className:"dndContainer",children:Object(y.jsx)(W,{mapUrl:i.map,rscUrl:i.rsc})})}var K=i(82),J=i.n(K),Y=i(9),Z=i(23),q=function(t){var e=t.drawContent,i=t.width,r=t.height,a=Object(Z.a)(t,["drawContent","width","height"]),n=s.a.useRef(null);return s.a.useEffect((function(){var t=n.current,s=null===t||void 0===t?void 0:t.getContext("2d");t&&s&&(void 0!==i&&(s.canvas.width=i),void 0!==r&&(s.canvas.height=r),e?e(s):(s.fillStyle="#000000",s.fillRect(0,0,s.canvas.width,s.canvas.height)))}),[e,r,i]),Object(y.jsx)("canvas",Object(Y.a)({ref:n},a))},X=function(t,e){for(var i=new ImageData(t.mapSize,t.mapSize),r=0;r<t.mapSize*t.mapSize;r++)i.data[4*r+0]=t[e][r],i.data[4*r+1]=t[e][r],i.data[4*r+2]=t[e][r],i.data[4*r+3]=255;return i},$=function(t){var e=t.value,i=void 0===e?0:e,r=t.bitCount,s=void 0===r?8:r,a=t.onChange;return Object(y.jsxs)("select",{value:i,onChange:function(t){return a(parseFloat(t.target.value))},children:[Object(y.jsx)("option",{value:"-1",children:"n/a"}),new Array(s).fill(0).map((function(t,e){return Object(y.jsxs)("option",{value:e,children:["bit ",e]},e)}))]})};function Q(){var t=s.a.useState(null),e=Object(u.a)(t,2),i=e[0],r=e[1],a=s.a.useState(null),n=Object(u.a)(a,2),o=n[0],h=n[1],c=s.a.useState(-1),d=Object(u.a)(c,2),f=d[0],p=d[1],l=s.a.useState(-1),_=Object(u.a)(l,2),m=_[0],v=_[1],S=s.a.useState(-1),x=Object(u.a)(S,2),g=x[0],b=x[1],w=s.a.useState(1),j=Object(u.a)(w,2),M=j[0],U=j[1];var B=function(){var t;switch(M){case 0:t=function(t,e,i,r){for(var s=new ImageData(t.mapSize,t.mapSize),a=function(t,e){return 0!==(t&1<<e)?0:255},n=0;n<t.mapSize*t.mapSize;n++){var o=t.flagsMap[n];s.data[4*n+0]=-1!==e?a(o,e):0,s.data[4*n+1]=-1!==i?a(o,i):0,s.data[4*n+2]=-1!==r?a(o,r):0,s.data[4*n+3]=255}return s}(i,f,m,g);break;case 1:t=X(i,"heightMap");break;case 2:t=X(i,"waterMap")}return t};return Object(y.jsx)("div",{onDragOver:function(t){t.preventDefault()},onDrop:function(t){var e;if(t.preventDefault(),null===(e=t.dataTransfer.files)||void 0===e?void 0:e.length){var i=t.dataTransfer.files[0].name,s=URL.createObjectURL(t.dataTransfer.files[0]);fetch(s).then((function(t){return t.arrayBuffer()})).then((function(t){var e=new J.a(new z.a(t));h(i),r(e)}))}},style:{width:"100%",height:"100%",margin:"5px",userSelect:"text"},children:i&&o?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("h1",{children:o}),Object(y.jsxs)("select",{value:M,onChange:function(t){return U(parseInt(t.target.value))},children:[Object(y.jsx)("option",{value:"0",children:"Flags"}),Object(y.jsx)("option",{value:"1",children:"Heightmap"}),Object(y.jsx)("option",{value:"2",children:"Watermap"})]}),0===M&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)($,{value:f,bitCount:16,onChange:function(t){return p(t)}}),Object(y.jsx)($,{value:m,bitCount:16,onChange:function(t){return v(t)}}),Object(y.jsx)($,{value:g,bitCount:16,onChange:function(t){return b(t)}})]}),Object(y.jsx)("button",{onClick:function(){var t=B();if(t){var e=document.createElement("canvas"),i=e.getContext("2d");if(i){i.canvas.width=t.width,i.canvas.height=t.height,i.putImageData(t,0,0);var r=e.toDataURL("image/png"),s=(null===o||void 0===o?void 0:o.replace(/\.MAP$/i,""))||"";switch(M){case 0:s+="-r".concat(f,"g").concat(m,"b").concat(g,".png");break;case 1:s+="-height.png";break;case 2:s+="-water.png"}var a=document.createElement("a");a.setAttribute("download",s),a.setAttribute("href",r.replace("image/png","image/octet-stream")),a.click()}}},children:"Download"}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)(q,{width:i.mapSize,height:i.mapSize,drawContent:function(t){var e=B();e&&t.putImageData(e,0,0)}})]}):Object(y.jsx)("h1",{children:"Drop a Carnivores 1/2/IceAge MAP file here"})})}function tt(){return Object(y.jsx)("div",{})}function et(){return Object(y.jsx)(o.a,{children:Object(y.jsxs)(h.c,{children:[Object(y.jsx)(h.a,{exact:!0,path:"/",children:Object(y.jsx)(G,{})}),Object(y.jsx)(h.a,{path:"/edit-map",children:Object(y.jsx)(Q,{})}),Object(y.jsx)(h.a,{path:"/edit-model",children:Object(y.jsx)(tt,{})})]})})}var it=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,151)).then((function(e){var i=e.getCLS,r=e.getFID,s=e.getFCP,a=e.getLCP,n=e.getTTFB;i(t),r(t),s(t),a(t),n(t)}))};n.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(et,{})}),document.getElementById("root")),it()},71:function(t,e,i){var r,s,a=void 0;r=this,s=function(t){return function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.x=this._io.readF4le(),this.y=this._io.readF4le(),this.z=this._io.readF4le(),this.owner=this._io.readS2le(),this.hide=this._io.readU2le()},t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream"],s):t.exports?t.exports=s(i(16)):r.Vertex=s(r.KaitaiStream)},72:function(t,e,i){var r,s,a=void 0;r=this,s=function(t){return function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.v1=this._io.readU4le(),this.v2=this._io.readU4le(),this.v3=this._io.readU4le(),this.tax=this._io.readS4le(),this.tbx=this._io.readS4le(),this.tcx=this._io.readS4le(),this.tay=this._io.readS4le(),this.tby=this._io.readS4le(),this.tcy=this._io.readS4le(),this.fDoubleSide=0!=this._io.readBitsIntBe(1),this.fDarkBack=0!=this._io.readBitsIntBe(1),this.fOpacity=0!=this._io.readBitsIntBe(1),this.fMortal=0!=this._io.readBitsIntBe(1),this.fPhong=0!=this._io.readBitsIntBe(1),this.fEnvmap=0!=this._io.readBitsIntBe(1),this.fNeedvc=0!=this._io.readBitsIntBe(1),this.fUnused=this._io.readBitsIntBe(7),this.fDarkFront=0!=this._io.readBitsIntBe(1),this._io.alignToByte(),this.dMask=this._io.readU2le(),this.distant=this._io.readS4le(),this.next=this._io.readU4le(),this.group=this._io.readU4le(),this.reserved=this._io.readBytes(12)},t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream"],s):t.exports?t.exports=s(i(16)):r.Face=s(r.KaitaiStream)},74:function(t,e,i){var r,s,a=void 0;r=this,s=function(t){return function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}t.prototype._read=function(){this.heightMap=new Array(this.mapSize*this.mapSize);for(var t=0;t<this.mapSize*this.mapSize;t++)this.heightMap[t]=this._io.readU1();for(this.textureMap1=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.version){case 1:this.textureMap1[t]=this._io.readU1();break;case 2:this.textureMap1[t]=this._io.readU2le()}for(this.textureMap2=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.version){case 1:this.textureMap2[t]=this._io.readU1();break;case 2:this.textureMap2[t]=this._io.readU2le()}for(this.objectMap=this._io.readBytes(this.mapSize*this.mapSize),this.flagsMap=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.version){case 1:this.flagsMap[t]=new e(this._io,this,this._root);break;case 2:this.flagsMap[t]=new i(this._io,this,this._root)}2==this.version&&(this.dawnLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.dayLightMap=this._io.readBytes(this.mapSize*this.mapSize),2==this.version&&(this.nightLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.waterMap=this._io.readBytes(this.mapSize*this.mapSize),this.objectHeightMap=this._io.readBytes(this.mapSize*this.mapSize),this.fogsMap=this._io.readBytes(Math.floor(this.mapSize*this.mapSize/4)),this.ambientMap=this._io.readBytes(Math.floor(this.mapSize*this.mapSize/4))};var e=t.FlagsV1=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.fTexDirection=this._io.readBitsIntLe(2),this.fModelDirection=this._io.readBitsIntLe(3),this.fNoWay=0!=this._io.readBitsIntLe(1),this.fReverse=0!=this._io.readBitsIntLe(1),this.fWater=0!=this._io.readBitsIntLe(1)},t}(),i=t.FlagsV2=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.fTexDirection=this._io.readBitsIntLe(2),this.fModelDirection=this._io.readBitsIntLe(2),this.fReverse=0!=this._io.readBitsIntLe(1),this.fNoWay=0!=this._io.readBitsIntLe(1),this.unused1=0!=this._io.readBitsIntLe(1),this.fWater=0!=this._io.readBitsIntLe(1),this.fTex2Direction=this._io.readBitsIntLe(2),this.unused2=this._io.readBitsIntLe(5),this.fWater2=0!=this._io.readBitsIntLe(1)},t}();return Object.defineProperty(t.prototype,"mapSize",{get:function(){return void 0!==this._m_mapSize||(this._m_mapSize=512*this.version),this._m_mapSize}}),Object.defineProperty(t.prototype,"yScale",{get:function(){return void 0!==this._m_yScale||(this._m_yScale=32*this.version),this._m_yScale}}),Object.defineProperty(t.prototype,"version",{get:function(){return void 0!==this._m_version||(this._m_version=2228224==this._io.size?1:14155776==this._io.size?2:0),this._m_version}}),Object.defineProperty(t.prototype,"tileSize",{get:function(){return void 0!==this._m_tileSize||(this._m_tileSize=256),this._m_tileSize}}),Object.defineProperty(t.prototype,"isValid",{get:function(){return void 0!==this._m_isValid||(this._m_isValid=1==this.version||2==this.version),this._m_isValid}}),t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream"],s):t.exports?t.exports=s(i(16)):r.Map=s(r.KaitaiStream)},75:function(t,e,i){var r,s,a=void 0;r=this,s=function(t,e){return function(){function t(t,e,i,r){this._io=t,this._parent=e,this._root=i||this,this.version=r,this._read()}t.AudioReverb=Object.freeze({GENERIC:0,PLATE:1,FOREST:2,MOUNTAIN:3,CANYON:4,CAVE:5,SPECIAL2:6,UNUSED:7,0:"GENERIC",1:"PLATE",2:"FOREST",3:"MOUNTAIN",4:"CANYON",5:"CAVE",6:"SPECIAL2",7:"UNUSED"}),t.prototype._read=function(){this.textureCount=this._io.readU4le(),this.modelCount=this._io.readU4le(),2==this.version&&(this.dawnSkyRgb=new i(this._io,this,this._root)),this.daySkyRgb=new i(this._io,this,this._root),2==this.version&&(this.nightSkyRgb=new i(this._io,this,this._root)),2==this.version&&(this.dawnSkyTRgb=new i(this._io,this,this._root)),this.daySkyTRgb=new i(this._io,this,this._root),2==this.version&&(this.nightSkyTRgb=new i(this._io,this,this._root)),this.textures=new Array(this.textureCount);for(var t=0;t<this.textureCount;t++)this.textures[t]=new c(this._io,this,this._root);for(this.models=new Array(this.modelCount),t=0;t<this.modelCount;t++)this.models[t]=new r(this._io,this,this._root);for(2==this.version&&(this.dawnSkyTexture=this._io.readBytes(this.skyTextureWidth*this.skyTextureHeight*2)),this.daySkyTexture=this._io.readBytes(this.skyTextureWidth*this.skyTextureHeight*2),2==this.version&&(this.nightSkyTexture=this._io.readBytes(this.skyTextureWidth*this.skyTextureHeight*2)),this.cloudsMap=this._io.readBytes(16384),this.fogCount=this._io.readU4le(),this.fogList=new Array(this.fogCount),t=0;t<this.fogCount;t++)this.fogList[t]=new o(this._io,this,this._root);for(this.randomSoundCount=this._io.readU4le(),this.randomSounds=new Array(this.randomSoundCount),t=0;t<this.randomSoundCount;t++)this.randomSounds[t]=new u(this._io,this,this._root);for(this.ambientSoundCount=this._io.readU4le(),this.ambientSounds=new Array(this.ambientSoundCount),t=0;t<this.ambientSoundCount;t++)this.ambientSounds[t]=new h(this._io,this,this._root);if(2==this.version&&(this.waterCount=this._io.readU4le()),2==this.version)for(this.waters=new Array(this.waterCount),t=0;t<this.waterCount;t++)this.waters[t]=new n(this._io,this,this._root)};var i=t.Rgb=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.r=this._io.readU4le(),this.g=this._io.readU4le(),this.b=this._io.readU4le()},t}(),r=t.Model=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.radius=this._io.readS4le(),this.yLo=this._io.readS4le(),this.yHi=this._io.readS4le(),this.lineLength=this._io.readS4le(),this.lIntensity=this._io.readS4le(),this.circleRad=this._io.readS4le(),this.cIntensity=this._io.readS4le(),this.fPlaceWater=0!=this._io.readBitsIntLe(1),this.fPlaceGround=0!=this._io.readBitsIntLe(1),this.fPlaceUser=0!=this._io.readBitsIntLe(1),this.fCircle=0!=this._io.readBitsIntLe(1),this.fBound=0!=this._io.readBitsIntLe(1),this.fNoBmp=0!=this._io.readBitsIntLe(1),this.fNoLight=0!=this._io.readBitsIntLe(1),this.fDefaultLight=0!=this._io.readBitsIntLe(1),this.fGroundLight=0!=this._io.readBitsIntLe(1),this.fNoSoft=0!=this._io.readBitsIntLe(1),this.fNoSoft2=0!=this._io.readBitsIntLe(1),this.fUnused=this._io.readBitsIntLe(20),this.fIsAnimated=0!=this._io.readBitsIntLe(1),this._io.alignToByte(),this.grRad=this._io.readS4le(),this.refLight=this._io.readS4le(),this.lastAniTime=this._io.readU4le(),this.boundR=this._io.readF4le(),this.reserved=this._io.readBytes(16),this.model=new e(this._io,this,null),2==this._root.version&&(this.billboard=new c(this._io,this,this._root)),this.fIsAnimated&&(this.animation=new a(this._io,this,this._root))},t}(),s=t.Trd=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.rNumber=this._io.readU4le(),this.rVolume=this._io.readU4le(),this.rFrequency=this._io.readU4le(),this.rEnvironment=this._io.readU2le(),this.rfNotAtNight=0!=this._io.readBitsIntLe(1),this.rfUnused=this._io.readBitsIntLe(15)},t}(),a=t.ModelAnimation=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.vc0=this._io.readU4le(),this.vc1=this._io.readU4le(),this.vc2=this._io.readU4le(),this.kps=this._io.readU4le(),this.frameCount=this._io.readU4le(),this.frames=new Array(3*this.frameCount*this.vc1);for(var t=0;t<3*this.frameCount*this.vc1;t++)this.frames[t]=this._io.readS2le()},t}(),n=t.Water=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.textureIndex=this._io.readU4le(),this.level=this._io.readU4le(),this.opacity=this._io.readF4le(),this.fogRgb=this._io.readU4le()},t}(),o=t.FogEntry=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.fogRgb=this._io.readU4le(),this.yBegin=this._io.readF4le(),this.mortal=this._io.readU4le(),this.transp=this._io.readF4le(),this.fLimit=this._io.readF4le()},t}(),h=t.AmbientSound=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.pcmSize=this._io.readU4le(),this.pcm=this._io.readBytes(this.pcmSize),this.rData=new Array(16);for(var t=0;t<16;t++)this.rData[t]=new s(this._io,this,this._root);this.rsfxCount=this._io.readU4le(),this.aVolume=this._io.readU4le()},t}(),u=t.RandomSound=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.pcmSize=this._io.readU4le(),this.pcm=this._io.readBytes(this.pcmSize)},t}(),c=t.Texture=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.data=this._io.readBytes(this.width*this.height*2)},Object.defineProperty(t.prototype,"width",{get:function(){return void 0!==this._m_width||(this._m_width=128),this._m_width}}),Object.defineProperty(t.prototype,"height",{get:function(){return void 0!==this._m_height||(this._m_height=128),this._m_height}}),t}();return Object.defineProperty(t.prototype,"skyTextureWidth",{get:function(){return void 0!==this._m_skyTextureWidth||(this._m_skyTextureWidth=256),this._m_skyTextureWidth}}),Object.defineProperty(t.prototype,"skyTextureHeight",{get:function(){return void 0!==this._m_skyTextureHeight||(this._m_skyTextureHeight=256),this._m_skyTextureHeight}}),t}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream","./C3df"],s):t.exports?t.exports=s(i(16),i(137)):r.Rsc=s(r.KaitaiStream,r.C3df)},76:function(t,e,i){var r,s,a=void 0;r=this,s=function(t,e,i,r){return function(){function s(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}s.prototype._read=function(){this.name=t.bytesToStr(t.bytesTerminate(this._io.readBytes(24),0,!1),"utf8"),this.msc=t.bytesToStr(t.bytesTerminate(this._io.readBytes(8),0,!1),"utf8"),this.animationCount=this._io.readU4le(),this.soundEffectCount=this._io.readU4le(),this.vertCount=this._io.readU4le(),this.faceCount=this._io.readU4le(),this.textureSize=this._io.readU4le(),this.faces=new Array(this.faceCount);for(var r=0;r<this.faceCount;r++)this.faces[r]=new i(this._io,this,null);for(this.vertices=new Array(this.vertCount),r=0;r<this.vertCount;r++)this.vertices[r]=new e(this._io,this,null);for(this.textureData=this._io.readBytes(this.textureSize),this.animations=new Array(this.animationCount),r=0;r<this.animationCount;r++)this.animations[r]=new n(this._io,this,this._root);for(this.soundEffects=new Array(this.soundEffectCount),r=0;r<this.soundEffectCount;r++)this.soundEffects[r]=new a(this._io,this,this._root);for(this.animSoundMap=new Array(64),r=0;r<64;r++)this.animSoundMap[r]=this._io.readS4le()};var a=s.SoundEffect=function(){function e(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return e.prototype._read=function(){this.name=t.bytesToStr(t.bytesTerminate(this._io.readBytes(32),0,!1),"utf8"),this.pcmLength=this._io.readU4le(),this.pcm=this._io.readBytes(this.pcmLength)},e}(),n=s.Animation=function(){function e(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return e.prototype._read=function(){this.name=t.bytesToStr(t.bytesTerminate(this._io.readBytes(32),0,!1),"utf8"),this.framesPerSecond=this._io.readU4le(),this.frameCount=this._io.readU4le(),this.frames=new Array(this.frameCount);for(var e=0;e<this.frameCount;e++)this.frames[e]=new o(this._io,this,this._root)},e}(),o=s.Frame=function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.vertices=new Array(this._root.vertCount);for(var t=0;t<this._root.vertCount;t++)this.vertices[t]=new r(this._io,this,null)},t}();return Object.defineProperty(s.prototype,"textureWidth",{get:function(){return void 0!==this._m_textureWidth||(this._m_textureWidth=256),this._m_textureWidth}}),Object.defineProperty(s.prototype,"textureHeight",{get:function(){return void 0!==this._m_textureHeight||(this._m_textureHeight=Math.floor(Math.floor(this.textureSize/2)/this.textureWidth)),this._m_textureHeight}}),s}()},"function"===typeof a&&a.amd?a(["kaitai-struct/KaitaiStream","./Vertex","./Face","./Ivector"],s):t.exports?t.exports=s(i(16),i(71),i(72),i(138)):r.Car=s(r.KaitaiStream,r.Vertex,r.Face,r.Ivector)},82:function(t,e,i){var r,s,a;s=[i(16)],void 0===(a="function"===typeof(r=function(t){return function(){function t(t,e,i){this._io=t,this._parent=e,this._root=i||this,this._read()}return t.prototype._read=function(){this.heightMap=this._io.readBytes(this.mapSize*this.mapSize),this.textureMap1=new Array(this.mapSize*this.mapSize);for(var t=0;t<this.mapSize*this.mapSize;t++)switch(this.isV1){case!0:this.textureMap1[t]=this._io.readU1();break;case!1:this.textureMap1[t]=this._io.readU2le()}for(this.textureMap2=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.isV1){case!0:this.textureMap2[t]=this._io.readU1();break;case!1:this.textureMap2[t]=this._io.readU2le()}for(this.objectMap=this._io.readBytes(this.mapSize*this.mapSize),this.flagsMap=new Array(this.mapSize*this.mapSize),t=0;t<this.mapSize*this.mapSize;t++)switch(this.isV1){case!0:this.flagsMap[t]=this._io.readU1();break;case!1:this.flagsMap[t]=this._io.readU2le()}this.isV1&&(this.lightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.isV2&&(this.dawnLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.isV2&&(this.dayLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.isV2&&(this.nightLightMap=this._io.readBytes(this.mapSize*this.mapSize)),this.waterMap=this._io.readBytes(this.mapSize*this.mapSize),this.objectHeightMap=this._io.readBytes(this.mapSize*this.mapSize),this.fogsMap=this._io.readBytes(Math.floor(this.mapSize*this.mapSize/4)),this.ambientMap=this._io.readBytes(Math.floor(this.mapSize*this.mapSize/4))},Object.defineProperty(t.prototype,"isV1",{get:function(){return void 0!==this._m_isV1||(this._m_isV1=2228224==this._io.size),this._m_isV1}}),Object.defineProperty(t.prototype,"isV2",{get:function(){return void 0!==this._m_isV2||(this._m_isV2=14155776==this._io.size),this._m_isV2}}),Object.defineProperty(t.prototype,"isValid",{get:function(){return void 0!==this._m_isValid||(this._m_isValid=this.isV1||this.isV2),this._m_isValid}}),Object.defineProperty(t.prototype,"mapSize",{get:function(){return void 0!==this._m_mapSize||(this._m_mapSize=this.isV1?512:1024),this._m_mapSize}}),t}()})?r.apply(e,s):r)||(t.exports=a)},88:function(t,e,i){},89:function(t,e,i){}},[[145,1,2]]]);
//# sourceMappingURL=main.3c525b28.chunk.js.map